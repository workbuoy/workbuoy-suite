groups:
- name: ingest-health
  interval: 1m
  rules:
  - alert: SFNoIngest
    expr: sum by (env) (increase(sf_upsert_total[15m])) == 0
    for: 15m
    labels:
      severity: warning
      team: integrations
      provider: salesforce
    annotations:
      summary: "No CRM ingest from Salesforce in {{ $labels.env }}"
      runbook: "docs/ALERT_HYGIENE.md#no-ingest"
  - alert: DynNoIngest
    expr: sum by (env) (increase(dyn_upsert_total[15m])) == 0
    for: 15m
    labels:
      severity: warning
      team: integrations
      provider: dynamics
    annotations:
      summary: "No CRM ingest from Dynamics in {{ $labels.env }}"
      runbook: "docs/ALERT_HYGIENE.md#no-ingest"
