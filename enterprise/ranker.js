function tok(s){return (s||'').toLowerCase().replace(/[^a-z0-9æøåäöü\- ]+/g,' ').split(/\s+/).filter(Boolean);}export function score(q,d){const qq=tok(q);const dd=tok((d.title||'')+' '+(d.content||''));if(!qq.length||!dd.length)return 0;const set=new Set(dd);let ov=0;for(const t of qq){if(set.has(t))ov++;}return ov/Math.sqrt(dd.length);}export function topK(q,docs,k=3){return (docs||[]).map(d=>({d,s:score(q,d)})).sort((a,b)=>b.s-a.s).slice(0,k).map(x=>x.d);}