.flip-card-host {
  position: relative;
  margin: 0 auto;
  will-change: transform;
  transform: translateZ(0);
}

.flip-card {
  position: relative;
  height: 100%;
  width: 100%;
  border-radius: var(--radius-lg);
  transform-style: preserve-3d;
  transition: transform var(--transition-slow);
  overflow: hidden;
  will-change: transform;
}

.flip-card[data-motion="calm"] {
  transition: transform 420ms cubic-bezier(0.22, 0.8, 0.26, 1);
}

.flip-card--flipped {
  transform: rotateY(180deg);
}

.flip-card[data-style="fast"] {
  transform-style: flat;
  transition: none;
}

.flip-card[data-style="fast"].flip-card--flipped {
  transform: none;
}

.flip-card[data-style="fast"] .flip-card-face {
  backface-visibility: visible;
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 220ms ease, transform 220ms ease;
  will-change: opacity, transform;
}

.flip-card[data-style="fast"][data-motion="calm"] .flip-card-face {
  transition-duration: 280ms;
  transition-timing-function: cubic-bezier(0.24, 0.82, 0.25, 1);
}

.flip-card[data-style="fast"][data-side="front"] .flip-card-face--front,
.flip-card[data-style="fast"][data-side="back"] .flip-card-face--back {
  opacity: 1;
  transform: translateY(0);
}

.flip-card[data-style="fast"][data-side="front"] .flip-card-face--back {
  opacity: 0;
  transform: translateY(12px);
}

.flip-card[data-style="fast"][data-side="back"] .flip-card-face--front {
  opacity: 0;
  transform: translateY(-12px);
}

.flip-card-toolbar {
  position: absolute;
  inset: 0 0 auto 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) var(--space-lg);
  z-index: var(--z-overlay);
  pointer-events: none;
}

.flip-card-toolbar__side,
.flip-card-toolbar__actions {
  display: flex;
  align-items: center;
  gap: 8px;
  pointer-events: auto;
  flex-wrap: wrap;
}

.flip-card-toolbar__flip,
.flip-card-toolbar__connect,
.flip-card-toolbar__resize {
  background: rgba(12, 16, 24, 0.65);
  border-color: var(--stroke-subtle);
  color: var(--fg-default);
}

.flip-card-toolbar__resize {
  cursor: ew-resize;
}

.flip-card-face {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  padding: calc(var(--space-xl) * 2) var(--space-md) var(--space-md);
  display: flex;
}

.flip-card-face--front {
  transform: rotateY(0deg);
}

.flip-card-face--back {
  transform: rotateY(180deg);
}

.flip-face-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.flip-card-connect {
  position: absolute;
  inset: 0;
  background: rgba(5, 8, 12, 0.72);
  display: grid;
  place-items: center;
  z-index: var(--z-dialog);
}

.flip-card-connect__form {
  background: var(--surface-elevated);
  border: 1px solid var(--stroke-hairline);
  border-radius: var(--radius-md);
  padding: var(--space-xl);
  width: min(320px, 90vw);
  display: grid;
  gap: var(--space-lg);
}

.flip-card-connect__label {
  display: grid;
  gap: 6px;
  font-size: 0.85rem;
}

.flip-card-connect__label input,
.flip-card-connect__label select {
  background: rgba(12, 16, 24, 0.65);
  border: 1px solid var(--stroke-subtle);
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  color: var(--fg-default);
}

.flip-card-connect__actions {
  display: flex;
  gap: var(--space-md);
  justify-content: flex-end;
}

@media (prefers-reduced-motion: reduce) {
  .flip-card {
    transition: none;
  }

  .flip-card[data-style="fast"] .flip-card-face {
    transition: none;
  }
}

@media (max-width: 720px) {
  .flip-card-face {
    padding: calc(var(--space-xl) * 1.75) var(--space-sm) var(--space-sm);
  }

  .flip-card-toolbar {
    padding: var(--space-sm) var(--space-md);
  }
}

@media (max-width: 540px) {
  .flip-card-toolbar {
    flex-direction: column;
    align-items: stretch;
    gap: 6px;
  }

  .flip-card-toolbar__actions {
    justify-content: flex-end;
  }
}
